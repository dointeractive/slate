<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Документация Instamart API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #151515;
  background-color: #ac4142;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #505050;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #d0d0d0;
}
.highlight .p, .highlight .pi {
  color: #d0d0d0;
}
.highlight .gi {
  color: #90a959;
}
.highlight .gd {
  color: #ac4142;
}
.highlight .gh {
  color: #6a9fb5;
  background-color: #151515;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #aa759f;
}
.highlight .kc {
  color: #d28445;
}
.highlight .kt {
  color: #d28445;
}
.highlight .kd {
  color: #d28445;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #90a959;
}
.highlight .sr {
  color: #75b5aa;
}
.highlight .si {
  color: #8f5536;
}
.highlight .se {
  color: #8f5536;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #6a9fb5;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #90a959;
}
.highlight .ss {
  color: #90a959;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='#'></a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="vviedieniie">Введение</h1>

<p>Спецификация API Instamart</p>

<blockquote>
  <p>API endpoint</p>
</blockquote>

<pre class="highlight shell"><code>http://api.instamart.ru
</code></pre>

<p>Instamart API построено в соответствии с архитектурой REST. Все URL в API имеют единую структуру и соответствуют отдельным ресурсам. Ответы API используют HTTP коды состояния для обозначения результата выполнения запроса. Мы используем встроенные механизмы HTTP, такие как HTTP методы, HTTP аутентификация и заголовки, которые поддерживаются всеми HTTP клиентами. Все запросы к API возвращают ответ в формате JSON, со всеми данными, включая ошибки.</p>

<p>Чтобы облегчить изучение API пользователю предоставляется тестовый API ключ.</p>


          <h1 id="polzovatieli">Пользователи</h1>

<h2 id="rieghistratsiia-novogho-polzovatielia">Регистрация нового пользователя</h2>

<blockquote>
  <p>Пример кода для регистрации нового пользователя:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/users'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d user[email]<span class="o">=</span><span class="c">#{EMAIL} \</span>
  -d user[first_name]<span class="o">=</span><span class="c">#{FIRSTNAME} \</span>
  -d user[last_name]<span class="o">=</span><span class="c">#{LASTNAME} \</span>
  -d user[password]<span class="o">=</span><span class="c">#{PASSWORD}</span>
</code></pre>

<p>Зарегистрировать нового пользователя можно, выполнив запрос:</p>

<p><code>POST https://api.instamart.ru/v2/users</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>user[email]</td>
      <td>Да</td>
      <td>Емейл пользователя</td>
    </tr>
    <tr>
      <td>user[password]</td>
      <td>Да</td>
      <td>Пароль</td>
    </tr>
    <tr>
      <td>user[first_name]</td>
      <td>Да</td>
      <td>Имя пользователя</td>
    </tr>
    <tr>
      <td>user[last_name]</td>
      <td>Да</td>
      <td>Фамилия пользователя</td>
    </tr>
    <tr>
      <td>user[location]</td>
      <td>Нет</td>
      <td>Местоположение пользователя</td>
    </tr>
  </tbody>
</table>

<h2 id="izmienieniie-dannykh-polzovatielia">Изменение данных пользователя</h2>

<blockquote>
  <p>Пример кода для изменения, местоположения пользователя:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/users/test@test.com'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d user[location]<span class="o">=</span>Perm
</code></pre>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ivan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Petrov"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Perm"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Изменить данные пользоватeля можно, выполнив следующий запрос:</p>

<p><code>PUT https://api.instamart.ru/v2/users/#{EMAIL}</code></p>

<h3 id="paramietry-zaprosa-1">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>email</td>
      <td>Да</td>
      <td>Емейл пользователя</td>
    </tr>
    <tr>
      <td>user[first_name]</td>
      <td>-</td>
      <td>Имя пользователя</td>
    </tr>
    <tr>
      <td>user[last_name]</td>
      <td>-</td>
      <td>Фамилия пользователя</td>
    </tr>
    <tr>
      <td>user[location]</td>
      <td>-</td>
      <td>Местоположение пользователя</td>
    </tr>
  </tbody>
</table>

<h2 id="poluchieniie-dannykh-polzovatielia">Получение данных пользователя</h2>

<blockquote>
  <p>Пример кода, чтобы определить зарегистрирован пользователь или нет:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/users/test@test.com'</span>
</code></pre>
<blockquote>
  <p>Если пользователь существует, ответ будет содержать следующие данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
  <p>Если пользователя не существует, сервер вернет ответ с кодом 404.<br />Если в запросе указать заголовок Authorization, то ответ будет содержать дополнительные данные:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/users/test@test.com'</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span>
</code></pre>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@test.com"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ivan"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Petrov"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Moscow"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить данные пользователя можно, выполнив запрос:<br />
<code>GET https://api.instamart.ru/v2/users/#{EMAIL}</code></p>

<p>Запрос к этому ресурсу можно выполнять как с указанием токена аутентификации так и без. Без указания токена сервер вернет ограниченное количество информации.</p>

<h3 id="paramietry-zaprosa-2">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>email</td>
      <td>Да</td>
      <td>Емейл пользователя</td>
    </tr>
  </tbody>
</table>

          <h1 id="autientifikatsiia">Аутентификация</h1>

<p>Для доступа к API Instamart пользователь должен пройти процедуру аутентификации и получить токен доступа.</p>

<h2 id="autientifikatsiia-chieriez-iemieil-i-parol">Аутентификация через емейл и пароль</h2>

<blockquote>
  <p>Пример кода для аутентификации пользователя с учетными данными “test@test.ru”, “qwer”:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/sessions'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s1">'Authorization: Basic dGVzdEB0ZXN0LnJ1OnF3ZXIK'</span>
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FWtn0HAjBD6rNxWwEV0Cj7JXSEPGJQ"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Аутентификация осуществляется методом <a href="https://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic Auth</a>.</p>

<p>Получить токен можно, выполнив запрос:<br />
<code>POST https://api.instamart.ru/v2/sessions</code></p>

<p>Учетные данные пользователя (емейл и пароль) передаются в заголовке запроса вида:<br />
<code>Authorization: Basic #{DIGEST}</code><br />
где <code>#{DIGEST}</code> формируется следующим способом: <code>base64(email + ':' + password)</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>email</td>
      <td>Да</td>
      <td>Емейл пользователя</td>
    </tr>
    <tr>
      <td>password</td>
      <td>Да</td>
      <td>Пароль пользователя</td>
    </tr>
  </tbody>
</table>

<h2 id="autientifikatsiia-chieriez-sotsialnyie-sieti">Аутентификация через социальные сети</h2>

<blockquote>
  <p>Пример кода для аутентификации пользователя через vkontakte</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/auth_providers/vkontakte/sessions'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="nv">uid</span><span class="o">=</span>0
  -d session[first_name]<span class="o">=</span>fname
  -d session[last_name]<span class="o">=</span>lname
  -d session[email]<span class="o">=</span>mail@example.com
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FWtn0HAjBD6rNxWwEV0Cj7JXSEPGJQ"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить токен можно, выполнив запрос:<br />
<code>POST https://api.instamart.ru/v2/auth_providers/#{PROVIDER_ID}/sessions</code></p>

<h3 id="paramietry-zaprosa-1">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>session[provider_id]</td>
      <td>Да</td>
      <td>Название социальной сети (vkontakte / facebook)</td>
    </tr>
    <tr>
      <td>session[uid]</td>
      <td>Да</td>
      <td>Идентификатор пользователя в социальной сети</td>
    </tr>
    <tr>
      <td>session[first_name]</td>
      <td>Да (в первый раз)</td>
      <td>Имя пользователя</td>
    </tr>
    <tr>
      <td>session[last_name]</td>
      <td>Да (в первый раз)</td>
      <td>Фамилия пользователя</td>
    </tr>
    <tr>
      <td>session[email]</td>
      <td>Да (в первый раз)</td>
      <td>Емейл пользователя</td>
    </tr>
  </tbody>
</table>

          <h1 id="vosstanovlieniie-parolia">Восстановление пароля</h1>

<h2 id="zapros-na-vosstanovlieniie-parolia">Запрос на восстановление пароля</h2>

<blockquote>
  <p>Пример кода c запросом на “восстановление пароля”</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/passwords/reset'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d password_reset[email]<span class="o">=</span><span class="c">#{EMAIL}</span>
</code></pre>

<blockquote>
  <p>Если пользователя не существует, то сервер вернет ответ с кодом 404</p>
</blockquote>

<p>Отправить пользователю письмо с инструкцией “восстановления пароля” можно, выполнив запрос:<br />
<code>POST https://api.instamart.ru/v2/passwords/reset</code></p>

<p>Письмо будет содержать ссылку на приложение с параметром <code>reset_password_token</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>password_reset[email]</td>
      <td>Да</td>
      <td>Емейл пользователя</td>
    </tr>
  </tbody>
</table>

<h2 id="sbros-parolia">Сброс пароля</h2>

<blockquote>
  <p>Пример кода c запросом сброса пароля</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/passwords'</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d password_reset[reset_password_token]<span class="o">=</span><span class="c">#{TOKEN}</span>
  -d password_reset[password]<span class="o">=</span><span class="c">#{PASSWORD}</span>
  -d password_reset[password_confirmation]<span class="o">=</span><span class="c">#{PASSWORD_CONFIRMATION}</span>
</code></pre>

<p>Сбросить пароль пользователя можно, выполнив запрос:<br />
<code>POST https://api.instamart.ru/v2/passwords</code></p>

<h3 id="paramietry-zaprosa-1">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>password_reset[reset_password_token]</td>
      <td>Да</td>
      <td>Токен для сброса пароля</td>
    </tr>
    <tr>
      <td>password_reset[password]</td>
      <td>Да</td>
      <td>Пароль</td>
    </tr>
    <tr>
      <td>password_reset[password_confirmation]</td>
      <td>Да</td>
      <td>Подтверждение пароля</td>
    </tr>
  </tbody>
</table>

          <h1 id="adriesa-polzovatieliei">Адреса пользователей</h1>

<h2 id="poluchieniie-spiska-adriesov">Получение списка адресов</h2>

<pre class="highlight shell"><code>curl <span class="s1">'https://instamart.ru/v1/orders'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> 
</code></pre>

<blockquote>
  <p>Ответ будет содержать следующие данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w"> 
  </span><span class="nt">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Москва"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Фридриха Энгельса"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"building"</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="p">,</span><span class="w">
      </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111111"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>

<p>Получить список всех адресов можно, выполнив запрос:</p>

<p><code>GET https://instamart.ru/v1/orders</code></p>

<h2 id="sozdaniie-novogho-adriesa">Создание нового адреса</h2>

<pre class="highlight shell"><code>curl <span class="s1">'https://instamart.ru/v1/orders'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span>
  -X POST <span class="se">\</span>
  -d <span class="s2">"address[city]=Москва"</span> <span class="se">\</span>
  -d <span class="s2">"address[street]=Фридриха Энгельса"</span> <span class="se">\</span>
  -d <span class="s2">"address[building]=56"</span> <span class="se">\</span>
  -d <span class="s2">"address[zipcode]=111111"</span>
</code></pre>

<blockquote>
  <p>В случае если данные были указаны верно, сервер вернет ответ:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Москва"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Фридриха Энгельса"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"building"</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="p">,</span><span class="w">
  </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111111"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Добавить новый адрес пользователя можно, выполнив запрос:</p>

<p><code>POST https://instamart.ru/v1/orders</code></p>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>address[city]</td>
      <td>Да</td>
      <td>Город</td>
    </tr>
    <tr>
      <td>address[street]</td>
      <td>-</td>
      <td>Улица</td>
    </tr>
    <tr>
      <td>address[building]</td>
      <td>-</td>
      <td>Номер дома</td>
    </tr>
    <tr>
      <td>address[zipcode]</td>
      <td>-</td>
      <td>Почтовый индекс</td>
    </tr>
  </tbody>
</table>

<h2 id="riedaktirovaniie-adriesa">Редактирование адреса</h2>

<pre class="highlight shell"><code>curl <span class="s1">'https://instamart.ru/v1/orders/2'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -d <span class="s2">"address[building]=53"</span>
</code></pre>

<blockquote>
  <p>В случае если данные были указаны верно, сервер вернет ответ:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Москва"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Фридриха Энгельса"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"building"</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="p">,</span><span class="w">
  </span><span class="nt">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111111"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Изменить адрес можно, выполнив запрос:</p>

<p><code>PUT https://instamart.ru/v1/orders/#{ID}</code></p>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ID</td>
      <td>Да</td>
      <td>id адреса</td>
    </tr>
    <tr>
      <td>address[city]</td>
      <td>-</td>
      <td>Город</td>
    </tr>
    <tr>
      <td>address[street]</td>
      <td>-</td>
      <td>Улица</td>
    </tr>
    <tr>
      <td>address[building]</td>
      <td>-</td>
      <td>Номер дома</td>
    </tr>
    <tr>
      <td>address[zipcode]</td>
      <td>-</td>
      <td>Почтовый индекс</td>
    </tr>
  </tbody>
</table>

<h2 id="udalieniie-adriesa">Удаление адреса</h2>

<pre class="highlight shell"><code>curl <span class="s1">'https://instamart.ru/v1/orders/2'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -X DELETE
</code></pre>

<blockquote>
  <p>В случае успешного удаления сервер вернет пустой ответ с кодом 200</p>
</blockquote>

<p>Удалить адрес можно, выполнив запрос:</p>

<p><code>DELETE https://instamart.ru/v1/orders/#{ID}</code></p>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ID</td>
      <td>Да</td>
      <td>id адреса</td>
    </tr>
  </tbody>
</table>

          <h1 id="ritieiliery">Ритейлеры</h1>

<h2 id="poluchieniie-spiska-ritieilierov">Получение списка ритейлеров</h2>

<pre class="highlight shell"><code>curl <span class="s2">"https://api.instamart.ru/v2/retailers"</span> <span class="se">\</span>
</code></pre>

<blockquote>
  <p>Команда выше возвращает JSON:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Metro"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/retailers/metro.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ашан"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"logo"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/retailers/auchan.png"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Получить список ритейлеров подключенных к Instamart можно выполнив запрос</p>

<h3 id="http-zapros">HTTP запрос</h3>

<p><code>GET https://api.instamart.ru/v2/retailers</code></p>

          <h1 id="katieghorii">Категории</h1>

<blockquote>
  <p>Пример кода для получения списка всех категорий</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/taxons?rid=1'</span>
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Продукты питания"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"taxons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай и кофе"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Получить список всех категорий можно, выполнив запрос:</p>

<p><code>GET https://api.instamart.ru/v2/taxons</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>rid</code></td>
      <td>Да</td>
      <td>ID ритейлера для которого необходимо получить список категорий.</td>
    </tr>
  </tbody>
</table>

          <h1 id="katalogh">Каталог</h1>

<h2 id="vydacha-dlia-ghlavnoi-stranitsy">Выдача для главной страницы</h2>

<blockquote>
  <p>Пример команды</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/departments?rid=1'</span> <span class="se">\</span>
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"departments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай и кофе"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"products_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">668</span><span class="p">,</span><span class="w">
        </span><span class="nt">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
          </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай Lipton Yellow Label"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
          </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
          </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
          </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">150.0</span><span class="p">,</span><span class="w">
          </span><span class="nt">"human_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10 пак x 6"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"items_per_pack"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:://instamart.ru/file.png?1370533476"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http::/instamart.ru/file.png?1370533476"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http::/instamart.ru/file.png?1370533476"</span><span class="w">
          </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить выдачу для главной страницы можно, выполнив следующий запрос:</p>

<p><code>GET https://api.instamart.ru/v2/departments</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>rid</code></td>
      <td>Да</td>
      <td>ID ритейлера для которого необходимо получить список товаров.</td>
    </tr>
  </tbody>
</table>

<h2 id="vydacha-stranitsy-katieghorii">Выдача страницы категории</h2>

<blockquote>
  <p>Пример команды</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/departments/174?rid=1'</span> <span class="se">\</span>
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w"> 
  </span><span class="nt">"department"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай и кофе"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"products_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">668</span><span class="p">,</span><span class="w">
    </span><span class="nt">"aisles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"product_counts"</span><span class="p">:</span><span class="w"> </span><span class="mi">327</span><span class="p">,</span><span class="w">
        </span><span class="nt">"taxon_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">267</span><span class="p">,</span><span class="w">
        </span><span class="nt">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай Lipton Yellow Label"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
            </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
            </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
            </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">150.0</span><span class="p">,</span><span class="w">
            </span><span class="nt">"human_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10 пак x 6"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"items_per_pack"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить выдачу страницы каталога можно, выполнив следующий запрос:</p>

<p><code>GET https://api.instamart.ru/v2/departments/#{DEPARTMENT_ID}</code></p>

<h3 id="paramietry-zaprosa-1">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>rid</code></td>
      <td>Да</td>
      <td>ID ритейлера для которого необходимо получить список товаров.</td>
    </tr>
    <tr>
      <td>DEPARTMENT_ID</td>
      <td>Да</td>
      <td>id категории</td>
    </tr>
  </tbody>
</table>

          <h1 id="produkty">Продукты</h1>

<h2 id="spisok-produktov">Список продуктов</h2>

<pre class="highlight shell"><code>curl <span class="s2">"https://api.instamart.ru/v2/products?rid=1"</span> 
</code></pre>

<blockquote>
  <p>Команда выше возвращает JSON:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Бананы"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">54.79</span><span class="p">,</span><span class="w">
    </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">55.79</span><span class="p">,</span><span class="w">
    </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">500.0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Бананы желтые из Эквадора"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/products/1/mini/file.png"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/products/1/small/file.png"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/products/1/product/file.png"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w"> </span><span class="err">...</span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Получить список продуктов доступных в текущий момент в Instamart можно выполнив запрос</p>

<h3 id="http-zapros">HTTP запрос</h3>

<p><code>GET https://api.instamart.ru/v2/products</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>rid</td>
      <td>Да</td>
      <td>ID ритейлера для которого необходимо получить список товаров.</td>
    </tr>
    <tr>
      <td>tid</td>
      <td>–</td>
      <td>ID категории. Если указан - вернутся только товары из этой категории.</td>
    </tr>
  </tbody>
</table>

<aside class="notice">
Не забудьте указать обязательный параметр идентификатор ритейлера
</aside>

<h2 id="kartochka-produkta">Карточка продукта</h2>

<pre class="highlight shell"><code>curl <span class="s2">"https://api.instamart.ru/v2/products/1"</span>
</code></pre>

<blockquote>
  <p>Команда выше возвращает JSON:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Бананы"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">54.79</span><span class="p">,</span><span class="w">
  </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">55.79</span><span class="p">,</span><span class="w">
  </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">500.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Бананы желтые из Эквадора"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Калорийность"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"value"</span><span class="p">:</span><span class="w"> </span><span class="s2">"96"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/products/1/mini/file.png"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/products/1/small/file.png"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://instamart.ru/products/1/product/file.png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"similar_products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Бананы мини"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.79</span><span class="p">,</span><span class="w">
      </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.99</span><span class="p">,</span><span class="w">
      </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.20</span><span class="p">,</span><span class="w">
      </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">500.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Бананы мини"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
      </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить данные для карточки продукта, можно выполнив запрос</p>

<h3 id="http-zapros-1">HTTP запрос</h3>

<p><code>GET https://api.instamart.ru/v2/products/#{PRODUCT_ID}</code></p>

<h3 id="paramietry-zaprosa-1">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>product_id</td>
      <td>Да</td>
      <td>ID продукта</td>
    </tr>
  </tbody>
</table>


          <h1 id="poisk">Поиск</h1>

<h2 id="podskazki-poiska">Подсказки поиска</h2>

<blockquote>
  <p>Пример запроса подсказок, для слова “чай”</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://instamart.ru/v1/search/suggestions?rid=1&amp;q=%D1%87%D0%B0%D0%B9'</span>
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"taxons"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"position"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"parent_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nt">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай Lipton Yellow Label"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
      </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
      </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">150.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"human_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10 пак x 6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"items_per_pack"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Для получения списка подсказок поиска, выполните запрос:</p>

<p><code>GET https://instamart.ru/v1/search/suggestions</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>rid</code></td>
      <td>Да</td>
      <td>ID ритейлера, по которому происходит поиск</td>
    </tr>
    <tr>
      <td><code>q</code></td>
      <td>Да</td>
      <td>Поисковая фраза</td>
    </tr>
  </tbody>
</table>

<h2 id="riezultaty-poiska">Результаты поиска</h2>

<blockquote>
  <p>Пример запроса результатов поиска, для слова “чай”</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://instamart.ru/v1/search/results?rid=1&amp;q=%D1%87%D0%B0%D0%B9'</span>
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай Lipton Yellow Label"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
      </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
      </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
      </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">150.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"human_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10 пак x 6"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"items_per_pack"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file.png?1370533476"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Для получения результатов поиска, выполните запрос:</p>

<p><code>GET https://instamart.ru/v1/search/results</code></p>

<h3 id="paramietry-zaprosa-1">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>rid</code></td>
      <td>Да</td>
      <td>ID ритейлера, по которому происходит поиск</td>
    </tr>
    <tr>
      <td><code>q</code></td>
      <td>Да</td>
      <td>Поисковая фраза</td>
    </tr>
  </tbody>
</table>

          <h1 id="zakazy">Заказы</h1>

<h2 id="sozdaniie-novogho-zakaza">Создание нового заказа</h2>

<blockquote>
  <p>Пример команды:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/orders'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -X POST
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"item_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ship_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cart"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"adjustment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-06T18:52:33.724Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-06T18:52:33.752Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"shipment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"special_instructions"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ship_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Создать новый заказ можно, выполнив следующий запрос:</p>

<p><code>POST https://api.instamart.ru/v2/orders</code></p>

<h2 id="poluchit-tiekushchii-zakaz">Получить текущий заказ</h2>

<blockquote>
  <p>Пример команды:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/orders/current'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> 
</code></pre>

<blockquote>
  <p>Ответ будет содержать следующие данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"item_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ship_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cart"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"adjustment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-06T18:52:33.724Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-06T18:52:33.752Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"shipment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"special_instructions"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ship_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить текущий заказ пользователя можно, выполнив запрос:<br />
<code>GET https://api.instamart.ru/v2/orders/current</code></p>

<h2 id="poluchit-spisok-vsiekh-zakazov">Получить список всех заказов</h2>

<blockquote>
  <p>Пример команды:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/orders'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> 
</code></pre>

<blockquote>
  <p>Ответ будет содержать следующие данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R335381310"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"item_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cart"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"adjustment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">-12.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-24T01:02:25Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-10-24T01:02:25Z"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"payment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"shipment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"payment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"special_instructions"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"total_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdef123456"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
      </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить все заказы пользователя можно, выполнив запрос:<br />
<code>GET https://api.instamart.ru/v2/orders</code></p>

<h2 id="dobavlieniie-pozitsii-zakaza">Добавление позиции заказа</h2>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/line_items'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d line_item[product_id]<span class="o">=</span>1 <span class="se">\</span>
  -d line_item[quantity]<span class="o">=</span>5
</code></pre>
<blockquote>
  <p>В ответе вернется созданный <code>line_item</code>:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">40.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nihil et itaque adipisci sed ea dolorum."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"retailer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.00</span><span class="p">,</span><span class="w">
  </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">500.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай Lipton Yellow Label"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
    </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
    </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"human_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10 пак x 6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"items_per_pack"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"options_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https::/instamart.ru/file.png?1370533476"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https:://instamart.ru/file.png?1370533476"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://instamart.ru/file.png?1370533476"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
  <p>Добавление позиции к заказу может изменить поле shipments заказа:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nt">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H123456789"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"shipped_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"retailer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"delivery_slot_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Добавить позицию к заказу, можно выполнив запрос:</p>

<p><code>POST https://api.instamart.ru/v2/line_items</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>line_item[product_id]</td>
      <td>Да</td>
      <td>ID продукта</td>
    </tr>
    <tr>
      <td>line_item[quantity]</td>
      <td>Да</td>
      <td>количество добавляемых позиций</td>
    </tr>
  </tbody>
</table>

<aside class="notice">
  После добавления новой позиции не забудьте перезагрузить заказ.
</aside>

<h2 id="riedaktirovaniie-pozitsii-zakaza">Редактирование позиции заказа</h2>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/line_items/1'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d line_item[quantity]<span class="o">=</span>3 <span class="se">\</span>
  -X PUT 
</code></pre>
<blockquote>
  <p>Ответ будет содержать следующие данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">40.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Nihil et itaque adipisci sed ea dolorum."</span><span class="p">,</span><span class="w">
  </span><span class="nt">"product_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">120.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Чай Lipton Yellow Label"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="nt">"original_price"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
    </span><span class="nt">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
    </span><span class="nt">"weight"</span><span class="p">:</span><span class="w"> </span><span class="mf">100.0</span><span class="p">,</span><span class="w">
    </span><span class="nt">"human_volume"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10 пак x 6"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"items_per_pack"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"options_text"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nt">"images"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mini_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://instamart.ru/file.png?1370533476"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"small_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://instamart.ru/file.png?1370533476"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"product_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://instamart.ru/file.png?1370533476"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Чтобы, например, изменить количество единиц товара, необходимо выполнить запрос:</p>

<p><code>PUT https://api.instamart.ru/v2/line_items/#{ID}</code></p>

<h3 id="paramietry-zaprosa-1">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ID</td>
      <td>Да</td>
      <td>ID позиции заказа</td>
    </tr>
    <tr>
      <td>line_item[quantity]</td>
      <td>Нет</td>
      <td>Количество единиц товара</td>
    </tr>
  </tbody>
</table>

<aside class="notice">
  После редактирования позиции не забудьте перезагрузить заказ.
</aside>

<h2 id="udalieniie-pozitsii-zakaza">Удаление позиции заказа</h2>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/line_items/1'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -X DELETE 
</code></pre>
<blockquote>
  <p>Ответ вернет результат с кодом 200</p>
</blockquote>

<blockquote>
  <p>Удаление позиции может изменить shipments заказа:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nt">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Чтобы удалить позицию заказа, необходимо выполнить запрос:</p>

<p><code>DELETE https://api.instamart.ru/v2/line_items/#{ID}</code></p>

<h3 id="paramietry-zaprosa-2">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ID</td>
      <td>Да</td>
      <td>ID позиции заказа</td>
    </tr>
  </tbody>
</table>

<aside class="notice">
  После добавления новой позиции не забудьте перезагрузить заказ.
</aside>

<h2 id="oformlieniie-zakaza">Оформление заказа</h2>

<blockquote>
  <p>Пример команды для выбора адреса доставки:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/checkouts/#{NUMBER}'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d <span class="s2">"order[ship_address_id]=1"</span>
</code></pre>
<blockquote>
  <p>Если данные были указаны верно, ответ будет содержать json-документ заказа:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"item_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ship_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cart"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"adjustment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-06T18:52:33.724Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-07-06T18:52:33.752Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"completed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"shipment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"payment_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"special_instructions"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"total_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nt">"ship_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Москва"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"full_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Старая Басманная 3"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
  </span><span class="nt">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">...</span><span class="p">],</span><span class="w">
  </span><span class="nt">"adjustments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
  <p>Пример заполнения комментария к доставке:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/checkouts/#{NUMBER}'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d <span class="s2">"order[special_instructions]=Вход со двора"</span>
</code></pre>

<blockquote>
  <p>Пример команды выбора интервала доставки:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/checkouts/#{NUMBER}'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d <span class="s2">"order[shipments_attributes][1][delivery_slot_id]=1"</span>
</code></pre>

<blockquote>
  <p>Ответ вернет обновленный заказ:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nt">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">}],</span><span class="w">
  </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H123456789"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"shipped_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"retailer_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"delivery_slot_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
  <p>Пример команды выбора способа доставки:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/checkouts/#{NUMBER}'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d <span class="s2">"order[shipments_attributes][1][shipping_method_id]=1"</span>
</code></pre>

<blockquote>
  <p>При выбранном способе доставки, ответ будет включать дополнительные данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"item_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
  </span><span class="nt">"shipments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"H123456789"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cost"</span><span class="p">:</span><span class="w"> </span><span class="mf">500.0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"shipped_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="nt">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"shipping_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Доставка"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<blockquote>
  <p>Пример выбора метода оплаты:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/checkouts/#{NUMBER}'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d <span class="s2">"order[payment_attributes][payment_tool_id]=1"</span>
</code></pre>

<blockquote>
  <p>При выбранном методе оплаты, ответ будет содержать дополнительные поля:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R307128032"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"item_total"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="err">}</span><span class="w">
</span></code></pre>

<blockquote>
  <p>Пример выбора способа связи:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s1">'https://api.instamart.ru/v2/checkouts/#{NUMBER}'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
  -d <span class="s2">"order[notification_attributes][notification_method_id]=1"</span>
  -d <span class="s2">"order[notification_attributes][phone]=74951112233"</span>
</code></pre>

<p>Для оформления заказа используется ресурс <code>checkouts</code>. Чтобы заполнить информацию о заказе, необходимо выполнить запрос:</p>

<p><code>PUT https://api.instamart.ru/v2/checkouts/#{NUMBER}</code></p>

<h3 id="paramietry-zaprosa-3">Параметры запроса</h3>

<p>При выполнение запроса следующие параметры не обязательны, но пока некоторые из них не будут указаны заказ нельзя будет завершить.</p>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>NUMBER</td>
      <td>Да</td>
      <td>Номер заказа</td>
    </tr>
    <tr>
      <td>SHIPMENT_ID</td>
      <td>Да</td>
      <td>id доставки</td>
    </tr>
    <tr>
      <td>order[ship_address_id]</td>
      <td>Да (для завершения)</td>
      <td>Адрес доставки</td>
    </tr>
    <tr>
      <td>order[coupon_code]</td>
      <td>-</td>
      <td>Промо код</td>
    </tr>
    <tr>
      <td>order[special_instructions]</td>
      <td>-</td>
      <td>Комментарий к заказу</td>
    </tr>
    <tr>
      <td>order[shipments_attributes][#{SHIPMENT_ID}][delivery_slot_id]</td>
      <td>Да (для завершения)</td>
      <td>id слота доставки</td>
    </tr>
    <tr>
      <td>order[shipments_attributes][#{SHIPMENT_ID}][shipping_method_id]</td>
      <td>Да (для завершения)</td>
      <td>Метод доставки</td>
    </tr>
    <tr>
      <td>order[payment_attributes][payment_tool_id]</td>
      <td>Да (для завершения)</td>
      <td>Источник оплаты</td>
    </tr>
    <tr>
      <td>order[notification_attributes][notification_method_id]</td>
      <td>Да (для завершения)</td>
      <td>Способ связи</td>
    </tr>
    <tr>
      <td>order[notification_attributes][phone]</td>
      <td>Да (для завершения)</td>
      <td>Телефон для связи</td>
    </tr>
  </tbody>
</table>

          <h1 id="mietody-oplaty">Методы оплаты</h1>

<pre class="highlight shell"><code>curl <span class="s1">'https://instamart.ru/v1/payment_tools'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Token token=#{TOKEN}'</span> <span class="se">\</span>
</code></pre>

<blockquote>
  <p>Ответ будет содержать следующие данные:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"payment_tools"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Оплата картой"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA *8888"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Наличными"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Оплата курьеру"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>Получить список доступных пользователю методов оплаты можно, выполнив запрос:</p>

<p><code>GET https://instamart.ru/v1/payment_tools</code></p>

          <h1 id="zhaloby-na-tovar">Жалобы на товар</h1>

<h2 id="poluchieniie-spiska-standartnykh-zhalob">Получение списка стандартных жалоб</h2>

<pre class="highlight shell"><code>curl <span class="s2">"https://api.instamart.ru/v2/flags"</span>
</code></pre>
<blockquote>
  <p>Эта комманда возвращает следующий JSON:</p>
</blockquote>

<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Неверное описание"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>Стандартный список ошибок можно загрузить, выполнив запрос:</p>

<p><code>GET https://api.instamart.ru/v2/flags</code></p>

<h2 id="otpravka-zhaloby">Отправка жалобы</h2>

<blockquote>
  <p>Пример отправки стандартной жалобы из списка:</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s2">"https://api.instamart.ru/v2/products/1/flags"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Token token=&lt;% TOKEN %&gt;"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d product_flag[flag_id]<span class="o">=</span>1
</code></pre>

<blockquote>
  <p>Пример отправки собственной жалобы</p>
</blockquote>

<pre class="highlight shell"><code>curl <span class="s2">"https://api.instamart.ru/v2/products/#{PRODUCT_ID}/flags"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Token token=&lt;% TOKEN %&gt;"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -d <span class="s2">"product_flag[description]=Слишком высокая цена"</span>
</code></pre>

<p>Чтобы отправить жалобу на товар, выполните следующий запрос, указав <code>id</code> жалобы:</p>

<p><code>POST https://api.instamart.ru/v2/products/#{PRODUCT_ID}/flags</code></p>

<p>Также, используя этот же URL, можно отправить свой текст жалобы, указав его в параметре <code>description</code></p>

<h3 id="paramietry-zaprosa">Параметры запроса</h3>

<table>
  <thead>
    <tr>
      <th>Параметр</th>
      <th>Обязательный</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>product_id</td>
      <td>Да</td>
      <td>id продукта</td>
    </tr>
    <tr>
      <td>product_flag[flag_id]</td>
      <td>Да (если не указан <code>description</code>)</td>
      <td>id жалобы</td>
    </tr>
    <tr>
      <td>product_falg[description]</td>
      <td>Да (если не указан <code>flag_id</code>)</td>
      <td>текст жалобы</td>
    </tr>
  </tbody>
</table>

          <h1 id="oshibki">Ошибки</h1>

<p>В Instamart API поддерживаются коды ошибок:</p>

<table>
  <thead>
    <tr>
      <th>Код ошибки</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>400</td>
      <td>Bad Request – Невалидный запрос</td>
    </tr>
    <tr>
      <td>401</td>
      <td>Unauthorized – Неправильный ключ API</td>
    </tr>
    <tr>
      <td>403</td>
      <td>Forbidden – Недостаточно прав для получения ресурса.</td>
    </tr>
    <tr>
      <td>404</td>
      <td>Not Found – Запрашиваемый ресурс не найден.</td>
    </tr>
    <tr>
      <td>500</td>
      <td>Internal Server Error – Ошибка не сервере. Попробуйте позже.</td>
    </tr>
    <tr>
      <td>503</td>
      <td>Service Unavailable – Технические работы, API временно недоступно. Попробуйте позже.</td>
    </tr>
  </tbody>
</table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
