# Оформление платежа

При оформлении заказа пользователь выбирает один из способов оплаты, которым он будет оплачивать заказ.

Для совершения платежа некоторые способы оплаты требуют дополнительных действий со стороны пользователя на стороннем сайте. API возвращает необходимую для этого информацию вместе с заказом, в объекте Payment.

### Структура объекта Payment

Атрибут | Описание
--------- | -----------
number | номер платежа
state | состояние платежа
is_finalization_needed | требуется ли оформление платежа
finalization_url | url перехода для оформления платежа


Если выбранный пользователем способ оплаты предполагает оформление платежа на стороннем сайте, то поле `is_finalization_needed` будет содержать значение `true`. В этом случае клиент API должен отобразить пользователю сайт внутри web-view компонента по ссылке из поля `finalization_url`. Пользователь осуществляет оплату (включая 3d-secure авторизацию) внутри этого компонента. После завершения оплаты пользователь будет переадресован на сайт instamart.ru, по этому переходу web-view можно будет закрыть.

<aside class="success">
  Сигналом завершения оплаты будет переадресация из стороннего сервиса на хост instamart.ru
</aside>

Например, для сервиса `moneta.ru` пользователь в случае успешной и неуспешной оплаты будет перенаправлен по соответствующим адресам:

- http://instamart.ru/gateway/payanyway/success
- http://instamart.ru/gateway/payanyway/fail

<aside class="warning">
  У каждого сервиса может быть свой собственный набор URL для переадрессации.
</aside>
