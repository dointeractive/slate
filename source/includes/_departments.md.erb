# Каталог

> Отдел с дочерними отделами

```json
{
  "id": 1,
  "name": "Чай и кофе",
  "products_count": 668,
  "products": []
}
```

> Отдел без дочерних отделов

```json
{
  "taxon_id": 1,
  "name": "Чай",
  "products_count": 232,
  "products": []
}
```

API каталога возвращает особое представление структуры категорий – "отделы". Отделы можно использовать для отображения главного экрана и экранов категорий.
API каталога предоставляет отделы в виде двухуровнего дерева. Запрос списка отделов всегда возвращает отделы "верхнего уровня". Отдел "верхнего уровня" может иметь дочерние отделы и в этом случае он может быть отображен на экране категорий, для этого в документ включено поле `id`. Если отдел "верхнего уровня" не имеет дочерних отделов, его не нужно отображать на экране категорий, поэтому в документе у него отсутствует поле `id`, вместо этого документ содержит поле `taxon_id`, которое можно использовать для вывода экрана с продуктами из этого отдела.
Запрос отдела для экрана категории возвращает сам отдел, а также его дочерние отделы ("нижнего уровня"). Отделы "нижнего уровня" всегда имеют только поле `taxon_id`, и не имеют поля `id`.

## Выдача для главного экрана

> Пример команды

```shell
curl 'https://api.instamart.ru/v2/departments?rid=1' \
```
> Ответ будет содержать следующие данные

```json
{
  "departments": [
    {
      "id": 1,
      "name": "Чай и кофе",
      "products_count": 668,
      "products": [
        {
          "id": 1,
          "name": "Чай Lipton Yellow Label",
          "price": 42,
          "original_price": 70,
          "discount": 28,
          "weight": 150.0,
          "human_volume": "10 пак x 6",
          "items_per_pack": 2,
          "images": [
            {
              "mini_url": "http:://instamart.ru/file.png?1370533476",
              "small_url": "http::/instamart.ru/file.png?1370533476",
              "product_url": "http::/instamart.ru/file.png?1370533476"
            }
          ]
        }
      ]
    }
  ],
  "deals": [{
    "taxon_id": 487,
    "name": "Бакалея",
    "products_count": 129,
    "icon": {
      "mini_url": "http://instamart.ru/spree/taxons/487/mini/Бакалея.png?1453225221",
      "normal_url": "http://instamart.ru/spree/taxons/487/normal/Бакалея.png?1453225221"
    }
  }]
}
```

Получить выдачу для главной страницы можно, выполнив следующий запрос:

`GET https://api.instamart.ru/v2/departments`

### Параметры запроса

Параметр | Обязательный | Описание
--------- | ------- | -----------
`rid` | Да | ID ритейлера для которого необходимо получить список товаров.

Ответ содержит список документов `departments` и может содержать документ `deals`.
Каждый элемент из списка `departments` должен обязательно включать одно из двух полей: `id` или `taxon_id`.
Если документ содержит поле `id`, то его можно использовать для получения экрана категории.
Если документ содержит поле `taxon_id`, то его можно использовать для получения списка продуктов.

Документ `deals` содержит данные для отображения продуктов из категории "скидки".

## Выдача экрана категории

> Пример команды

```shell
curl 'https://api.instamart.ru/v2/departments/174?rid=1' \
```
> Ответ будет содержать следующие данные

```json
{
  "department": {
    "id": 1,
    "name": "Чай и кофе",
    "products_count": 668,
    "aisles": [
      {
        "name": "Чай",
        "product_counts": 327,
        "taxon_id": 267,
        "products": [
          {
            "id": 1,
            "name": "Чай Lipton Yellow Label",
            "price": 42,
            "original_price": 70,
            "discount": 28,
            "weight": 150.0,
            "human_volume": "10 пак x 6",
            "items_per_pack": 2,
            "images": [
              {
                "mini_url": "/file.png?1370533476",
                "small_url": "/file.png?1370533476",
                "product_url": "/file.png?1370533476"
              }
            ]
          }
        ]
      }
    ]
  }
}
```

Получить выдачу страницы каталога можно, выполнив следующий запрос:

`GET https://api.instamart.ru/v2/departments/#{DEPARTMENT_ID}`

### Параметры запроса

Параметр | Обязательный | Описание
--------- | ------- | -----------
`rid` | Да | ID ритейлера для которого необходимо получить список товаров.
DEPARTMENT_ID | Да | id категории

Ответ содержит расширенные данные для данной категории.
Список подкатегорий лежит в поле `aisles` документа `department`.
Каждый документ из списка `aisles` по структуре идентичен документу `department`, но может иметь только поле `taxon_id`.
