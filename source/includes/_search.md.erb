# Поиск

## Популярные запросы

> Пример запроса

```shell
curl '<%= config[:host] %>/searches/suggestions?sid=1'
```
> Ответ будет содержать следующие данные

```json
{
  "suggestion": {
    "searches": [
      "молоко",
      "сыр"
    ],
    "search_phrases": [
      {
        "name": "молоко",
        "icon": {
          "mini_url": "<%= config[:host] %>/spree/products/5/mini/1.jpg?1540392543",
          "small_url": "<%= config[:host] %>/spree/products/5/small/1.jpg?1540392543",
          "product_url": "<%= config[:host] %>/spree/products/5/product/1.jpg?1540392543",
          "preview_url": "<%= config[:host] %>/spree/products/5/preview/1.jpg?1540392543",
          "original_url": "<%= config[:host] %>/spree/products/5/original/1.jpg?1540392543"
        }
      },
      {
        "name": "сыр",
        "icon": {
          "mini_url": "<%= config[:host] %>/assets/noimage/mini.png",
          "small_url": "<%= config[:host] %>/assets/noimage/small.png",
          "product_url": "<%= config[:host] %>/assets/noimage/product.png",
          "preview_url": "<%= config[:host] %>/assets/noimage/preview.png",
          "original_url": "<%= config[:host] %>/assets/noimage/original.png"
        }
      }
    ]
  }
}
```

Для получения списка популярных запросов поиска, выполните:

`GET <%= config[:host] %>/searches/suggestions?sid=SID`

### Параметры запроса

Параметр | Обязательный | Описание
--------- | ------- | -----------
`sid` | Да | ID магазина, в котором происходит поиск


## Подсказки поиска

> Пример запроса подсказок, для слова "чай"

```shell
curl '<%= config[:host] %>/searches/suggestions?sid=1&q=%D1%87%D0%B0%D0%B9'
```
> Ответ будет содержать следующие данные

```json
{
  "suggestion": {
    "taxons": [
      {
        "id": 3,
        "name": "Чай",
        "icon": {
          "mini_url": "<%= config[:host] %>/spree/taxons/5358/mini/16010000.jpg?1546015693",
          "normal_url": "<%= config[:host] %>/spree/taxons/5358/normal/16010000.jpg?1546015693"
        }
      }
    ],
    "products": [
      {
        "id": 1,
        "sku": "33688",
        "retailer_sku": "123456",
        "name": "Чай Lipton Yellow Label",
        "price": 42,
        ...
      }
    ]
  }
}
```

Для получения списка подсказок поиска, выполните запрос:

`GET <%= config[:host] %>/searches/suggestions?sid=SID&q=QUERY`

### Параметры запроса

Параметр | Обязательный | Описание
--------- | ------- | -----------
`sid` | Да | ID магазина, в котором происходит поиск
`q` | Да | Поисковая фраза

## Результаты поиска

Для получения результатов поиска используйте [API получения списка товаров](#poisk-produktov) с передачей параметра `q`

