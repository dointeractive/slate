# Магазины

## Получение списка магазинов

```shell
curl "<%= config[:host] %>/stores"
```

> Команда выше возвращает JSON:

```json
{
  "stores": [
    {
      "id": 1,
      "name": "Метро, просп. Мира",
      "zones": [
        [
          {
            "lon": 37.621164,
            "lat": 55.633049
          },
          {
            "lon": 37.627966,
            "lat": 55.633231
          },
          {
            "lon": 37.628481,
            "lat": 55.628691
          },
          {
            "lon": 37.619641,
            "lat": 55.628558
          },
          {
            "lon": 37.621164,
            "lat": 55.633049
          }
        ]
      ],
      "retailer": {
        "id": 1,
        "name": "Метро",
        "color": "#003d7a",
        "logo": "https://instamart.ru/logos/metro.png",
        "available": true,
        "environment": "production"
      },
      "location": {
        "id": 84646,
        "full_address": "Москва, просп. Мира, 211, стр. 1",
        "city": "Москва",
        "street": "просп. Мира",
        "building": "211, стр. 1",
        "lat": 55.844041,
        "lon": 37.66265
      },
      "services": [
        {
          "id": 1,
          "key": "prices",
          "description": "Цены как в магазине"
        }
      ]
    }
  ]

```

Получить список доступных магазинов можно получить, выполнив запрос

### HTTP запрос

`GET <%= config[:host] %>/stores`

Список магазинов можно отфильтровать, оставив только доступные для данного адреса доставки,
если передать два дополнительных параметра `lat` и `lon`.

Для болле точного расчета next_delivery нужно передавать токен авторизации.

### Параметры запроса

Параметр | Обязательный | Описание
--------- | ------- | -----------
lon | - | долгота
lat | - | широта

### Структура объекта Store

Атрибут | Описание
--------- | -----------
services | Список услуг в магазине

## Расширенные данные магазина

```shell
curl "<%= config[:host] %>/stores/1"
```

> Команда выше возвращает JSON:

```json
{
  "store": {
    "id": 1,
    "name": "Метро, просп. Мира",
    "zones": [
      [
        {
          "lon": 37.621164,
          "lat": 55.633049
        },
        {
          "lon": 37.627966,
          "lat": 55.633231
        },
        {
          "lon": 37.628481,
          "lat": 55.628691
        },
        {
          "lon": 37.619641,
          "lat": 55.628558
        },
        {
          "lon": 37.621164,
          "lat": 55.633049
        }
      ]
    ],
    "retailer": {
      "id": 1,
      "name": "Метро",
      "color": "#003d7a",
      "logo": "https://instamart.ru/logos/metro.png",
      "available": true,
      "environment": "production"
    },
    "location": {
      "id": 84646,
      "full_address": "Москва, просп. Мира, 211, стр. 1",
      "city": "Москва",
      "street": "просп. Мира",
      "building": "211, стр. 1",
      "lat": 55.844041,
      "lon": 37.66265
    },
    "services": [
      {
        "id": 1,
        "key": "prices",
        "description": "Цены как в магазине"
      }
    ]
  }
}
```

Получить полную информацию по магазину можно, выполнив запрос
Для болле точного расчета next_delivery нужно передавать токен авторизации. Если его нет то кординаты.

### Параметры запроса

Параметр | Обязательный | Описание
--------- | ------- | -----------
lon | - | долгота
lat | - | широта


### HTTP запрос

`GET <%= config[:host] %>/stores/#{ID}`

### Параметры запроса

Параметр | Обязательный | Описание
--------- | ------- | -----------
ID | Да | ID магазина

### Структура объекта Store

Атрибут | Описание
--------- | -----------
services | Список услуг в магазин
