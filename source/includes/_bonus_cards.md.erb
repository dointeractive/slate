# Бонусные карты

Бонусные карты принадлежат программам лояльности.

## Получение списка бонусных карт

```shell
curl "<%= config[:host] %>/bonus_cards" \
  -H "Authorization: Token token=#{TOKEN}"
```

> Ответ будет содержать следующие данные:

```json
{
   "bonus_cards":[
      {
         "id": 2,
         "number":"12345678",
         "loyalty_program_id": 3
      },
      {
         "id":3,
         "number":"11111111",
         "loyalty_program_id": 4
      }
   ],
   "meta": {
     "selected": 2
   }
}
```

<aside class="warning">
  not implemented
</aside>

Получить список бонусных карт пользователя можно, выполнив запрос:

`GET <%= config[:host] %>/bonus_cards`

Описание полей ответа

Параметр|Описание
---|---
id|Идентификатор бонусной карты
number|Номер бонусной карты
loyalty_program_id|Идентификатор программы лояльности, к которой относится карта
selected|Идентификатор карты, которая выбрана по-умолчанию

## Запрос на добавление бонусной карты

```shell
curl "<%= config[:host] %>/bonus_cards" \
  -H "Authorization: Token token=#{TOKEN}"
  -X POST \
  -d "bonus_card[number]=12341234" \
  -d "bonus_card[loyalty_program_id]=3"
```

> Ответ будет содержать следующие данные:

```json
{
   "bonus_card": {
     "id": 2,
     "number": "12341234",
     "loyalty_program_id": 3
   }
}
```

Добавить новую бонусную карту пользователя можно, выполнив запрос:

<aside class="warning">
  not implemented
</aside>

`POST <%= config[:host] %>/bonus_cards`

Параметр | Обязательный | Описание
--------- | ------- | -----------
bonus_card[number]|Да|Номер бонусной карты
bonus_card[loyalty_program_id]|Да|Идентификатор программы лояльности, к которой относится карта

## Запрос на обновление номера бонусной карты

```shell
curl "<%= config[:host] %>/bonus_cards/#{ID}" \
  -H "Authorization: Token token=#{TOKEN}"
  -X PUT \
  -d "bonus_card[number]=1111111"
```

> Ответ будет содержать следующие данные:

```json
{
   "bonus_card": {
     "id": 2,
     "number": "1111111",
     "loyalty_program_id": 3
   }
}
```

Обновить номер бонусной карты можно, выполнив запрос:

<aside class="warning">
  not implemented
</aside>

`PUT <%= config[:host] %>/bonus_cards/#{ID}`

Параметр | Обязательный | Описание
--------- | ------- | -----------
ID|Да|Идентификатор бонусной карты
bonus_card[number]|Да|Номер бонусной карты

## Запрос на удаление бонусной карты

```shell
curl "<%= config[:host] %>/bonus_cards/#{ID}" \
  -H "Authorization: Token token=#{TOKEN}" \
  -X DELETE
```

> В случае успешного удаления сервер вернет пустой ответ с кодом 200

Удалить бонусную карту пользователя можно, выполнив запрос:

`DELETE <%= config[:host] %>/bonus_cards/#{ID}`

Параметр | Обязательный | Описание
--------- | ------- | -----------
ID | Да | ID карты

## Выбор активной бонусной карты

```shell
curl "<%= config[:host] %>/bonus_cards/#{ID}/select" \
  -H "Authorization: Token token=#{TOKEN}"
  -X POST \
  -d "order_number=#{ORDER_NUMBER}" \
```

> В случае успешного запроса сервер вернет пустой ответ с кодом 200

<aside class="warning">
  not implemented
</aside>

Чтобы выбрать активную бонусную карту необходимо выполнить запрос:

`POST "<%= config[:host] %>/bonus_cards/#{ID}/select"`

Параметр | Обязательный | Описание
--------- | ------- | -----------
ID | Да | ID карты
order_number|Да|Номер заказа, к которому должна быть применена карта
