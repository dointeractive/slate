# Окна доставки

## Получение окон для подзаказа (shipment)

> Пример получения интервалов доставки для конкретного дня:

```shell
curl "<%= config[:api_host] %>/shipments/4/delivery_windows?date=2016-01-01" \
  -H "Authorization: Token token=#{TOKEN}"
```

> Ответ:

```json
{
  "delivery_windows": [{
    "id": 26193,
    "price": 300.0,
    "starts_at": "2016-10-16T09:00:00.000+03:00",
    "ends_at": "2016-10-16T12:00:00.000+03:00",
    "presentation": "09:00-12:00"
  }]
}
```

Чтобы получить окна доставки для подзаказа, выполните следующий запрос:

`GET <%= config[:api_host] %>/shipments/#{SHIPMENT_ID}/delivery_windows`
Данный запрос вернет все доступные окна доставки.
Чтобы получить список окон доставки за конкретный день, указажите дополнительный параметр `date` в формате `yyyy-mm-dd` (или `dd-mm-yyyy`).

Параметр | Обязательный | Описание
--------- | ------- | -----------
SHIPMENT_ID | Да | id подзаказа
date | Нет | Дата доставки


## Получение окон для подзаказа (новая механика ценообразования)

> Пример получения интервалов доставки для конкретного дня:

```shell
curl "<%= config[:api_host] %>/shipments/H57226465122/shipping_rates?date=2016-01-01" \
  -H "Authorization: Token token=#{TOKEN}"
```

> Ответ:

```json
{
  "shipping_rates": [
    {
      "total_value": 490,
      "value": 490,
      "is_boost": false,
      "is_drop": false,
      "is_free": false,
      "delivery_window": {
        "id": 3,
        "starts_at": "2018-10-02T09:00:00.000+03:00",
        "ends_at": "2018-10-02T11:00:00.000+03:00"
      }
    }
  ]
}
```

Чтобы получить окна доставки для подзаказа, выполните следующий запрос:

`GET <%= config[:api_host] %>/shipments/#{NUMBER}/shipping_rates`

Данный запрос вернет все доступные окна доставки для указанного дня(или для текущего).
Чтобы получить список окон доставки за конкретный день, указажите дополнительный параметр `date` в формате `yyyy-mm-dd` (или `dd-mm-yyyy`).

Параметр | Обязательный | Описание
--------- | ------- | -----------
NUMBER | Да | Номер доставки
date | Нет | Дата доставки

### Структура объекта ShippingRates

Атрибут | Описание
--------- | -----------
total_value | Стоимость доставки с наценкой
value | Стоимость доставки без наценки
delivery_window | Окно доставки
